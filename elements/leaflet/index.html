<!doctype html>
<!-- This page is useful for development and testing. As of. Nov 2017. This page works well with Chrome browser. -->
<html>
  <head>
    <meta name="viewport" content="initial-scale=1, width=device-width">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:400,100,100italic,300,300italic,400italic,500,500italic,700,700italic,900italic,900">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/js-beautify/1.7.4/beautify-html.js"></script>
    <script src="https://unpkg.com/code-prettify@0.1.0/src/run_prettify.js"></script>
    <link rel="import" href="../theme.tmpl.html" />

    <link rel="stylesheet" class="theme" href="../../themes/grey.css">
    <style>
      body { font-family: 'Roboto'; margin: 0; color: var(--theme-text-color-900, #212121); background-color: var(--theme-color-50, #FAFAFA); }
      *, *:before, *:after { box-sizing: border-box; }
      .container { padding: 12px; }
      .dark-bg { background-color: var(--theme-color-600, #757575); color: var(--theme-text-color-0, #ffffff); }
      .clear-both:after { visibility: hidden; display: block; font-size: 0; content: " "; clear: both; height: 0; }
      .float-right { float: right; }

      .demo { position: relative; }
      .view-source ~ label { padding: 12px 0; display: inline-block; }
      .view-source ~ .code { max-height: 0; overflow: hidden; border: none; margin: 0; transition: all .4s ease-out;}
      .view-source[checked] ~ .code { max-height: 999px;  transition: all 1s ease-out; overflow: auto;}
      a-map {display: block; height: 300px;}
      .demo.simple a-map {width: 300px; height: 300px; display: inline-block; border: 1px solid #ccc;}
    </style>
    <script>
      function setDemo(src, dest) {
        var html = document.querySelector(src).content.cloneNode(true).querySelector('*').outerHTML;
        document.querySelector(dest+' .demo').innerHTML = html;
        document.querySelector(dest+' .code').innerHTML = html_beautify(html, {indent_size: 2}).replace(/</g,'\&lt;');
      }
    </script>

    <script type="module" src="../map/main.js"></script>

    <script type="module" src="../card/main.js"></script>
    <link rel="stylesheet" class="card" href="../card/style.css">

    <script type="module" src="../switch/main.js"></script>
    <link rel="stylesheet" class="switch" href="../switch/style.css">

    <script type="module" src="../list/main.js"></script>
    <link rel="stylesheet" class="list" href="../list/style.css">

    <script type="module" src="../menu/main.js"></script>
    <link rel="stylesheet" class="menu" href="../menu/style.css">

    <link rel="stylesheet" class="icon" href="../icon/style.css">
    <link rel="stylesheet" class="nav-item" href="../nav-item/style.css">
  </head>
  <body>

    <template class="simple">
      <div>
        <a-map></a-map>
        <a-map zoom="12"></a-map>
        <a-map center="Brampton, Canada"></a-map>
      </div>
    </template>

    <template class="attr-change">
      <div style="text-align:center">
        <a-map id="map1" center="Brampton, Canada" scroll-wheel-zoom="false"></a-map>
        <br/>
        Enter Address: <input id="address" value="Brampton, Canada" onchange="updateMap(event)">
      </div>
    </template>
    <script>
      function updateMap(e) {
        let map = document.querySelector('#map1').setAttribute('center', e.target.value)
      }
    </script>

    <template class="no-init">
      <a-map id="map2" center="Brampton, Canada" no-init
        scroll-wheel-zoom="false"
        on-click="mapClicked"
        style="border: 1px solid #ccc"
        onclick="this.initialize()">
        This map is not initialized intentioally using `no-init`.<br/>
        Click here to initialize this map.
        Also click on the map to see latitude and longitute.
      </a-map>
    </template>
    <script>
      function mapClicked(e) {
        console.log('e', e);
        alert(`You clicked latitude: ${e.latlng.lat}, longitute ${e.latlng.lng}`);
      }
    </script>

    <div class="container">
      <h1>Leaflet Map</h1>

      <div id="import-theme-tmpl" class="clear-both"></div>

      <h2> Examples </h2>

      <a-card class="simple demo">
        <div class="title">
          <h2>Simple Map Example</h2>
          <p class="subtitle">
            A map is visiblie only with a map tag.
          </p>
        </div>
        <div class="text">
          <div class="demo"></div>
          <div>
            <a-switch id="demo-simple" class="view-source" checked></a-switch>
            <label for="demo-simple"> View Source</label>
            <pre class="code prettyprint"></pre>
          </div>
        </div>
      </a-card>
      <script>setDemo('template.simple', 'a-card.simple')</script>

      <a-card class="attr-change demo">
        <div class="title">
          <h2>Responds to attribute change</h2>
          <p class="subtitle">
            When you change attribute, it also changes the map when set function is defined.
          </p>
        </div>
        <div class="text">
          <div class="demo"></div>
          <div>
            <a-switch id="demo-attr-change" class="view-source"></a-switch>
            <label for="demo-attr-change"> View Source</label>
            <pre class="code prettyprint"></pre>
          </div>
        </div>
      </a-card>
      <script>setDemo('template.attr-change', 'a-card.attr-change')</script>

      <a-card class="no-init demo">
        <div class="title">
          <h2>Do not show map until asked</h2>
          <p class="subtitle">
            You can delay the initiazlie of the map. e.g. click
          </p>
        </div>
        <div class="text">
          <div class="demo"></div>
          <div>
            <a-switch id="demo-no-init" class="view-source"></a-switch>
            <label for="demo-no-init"> View Source</label>
            <pre class="code prettyprint"></pre>
          </div>
        </div>
      </a-card>
      <script>setDemo('template.no-init', 'a-card.no-init')</script>
    </div>

  </body>
</html>
